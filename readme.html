<h1 id="museum3d">Museum 3D</h1>

<p>
  <a href="https://intro-graphics-master.github.io/term-project-8/"
    >Demo (Recommend Chrome Browser)</a
  >
</p>

<p><img width="100%" src="./images/screenshot1.png" alt="screenshot1" /></p>

<p><img width="100%" src="./images/screenshot2.png" alt="screenshot2" /></p>

<p><img width="100%" src="./images/screenshot3.png" alt="screenshot3" /></p>

<p><img width="100%" src="./images/screenshot4.png" alt="screenshot4" /></p>

<p><img width="100%" src="./images/screenshot5.png" alt="screenshot5" /></p>

<h2 id="summary">Summary</h2>

<h3 id="nonobviousthingsimplemented">Non-obvious things implemented</h3>

<p>
  For non-obvious things implemented, please checkout Advanced Graphics Features
  section below. The section has pretty much everything we implemented including
  obvious ones and non-obvious ones.
</p>

<h3 id="diffuculties">Diffuculties</h3>

<h4 id="junhongwang">Junhong Wang</h4>

<p>
  Everything was hard to be honest. The hardest one was water because I had to
  take care of reflection, refraction, and normal. It is very computationally
  expensive too, so I had to optimize the code so that it only draws the water
  if the player is close enough to the location of water.
</p>

<h4 id="jonathan">Jonathan</h4>

<p>
  The hardest part is proabbly creating the Particles System class, since each
  particles must hold their own physcal properties that determines its next
  potential positision and velocity. the first build up Partical System Class
  often crashed or made the animation frame very slow. But with the help of
  Junhong, the System's preformance has a significant improvement.
</p>

<h4 id="john">John</h4>

<p>
  Without using the surface of revolution, it's really hard to model the light
  bulb with a few shapes like sphere, square, donut,...
</p>

<h3 id="advancedtopicsused">Advanced topics used</h3>

<p>
  For advanced topics used, please checkout Advanced Graphics Features section
  below. The section has pretty much everything we implemented including obvious
  ones and non-obvious ones.
</p>

<h3 id="teammatescontributions">Teammates' contributions</h3>

<h4 id="junhongwang-1">Junhong Wang</h4>

<ul>
  <li>Skybox</li>

  <li>1st / 3rd person view camera</li>

  <li>Water</li>

  <li>Minecraft person</li>

  <li>Mouse picking</li>

  <li>Terrain</li>

  <li>Mirror</li>

  <li>Torch (Particle System)</li>
</ul>

<h4 id="jonathan-1">Jonathan</h4>

<ul>
  <li>Partical System</li>

  <li>Partical</li>

  <li>FireWork</li>
</ul>

<h4 id="john-1">John</h4>

<ul>
  <li>Light Bulb (Surface of Revolution)</li>

  <li>Lighting effect</li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>
  We created an virtual museum with webGL. Inside the museum, there will be
  something visually pleasing implemented with advanced graphics features. As a
  player, you can walk into the museum, and see something like this.
</p>

<p><img width="100%" src="./images/lightbulb.jpg" alt="pasta" /></p>

<p>
  This is from Teamlab museum in Tokyo. A player can also interact with the
  arts. For example, clicking one of the light bulb above changes the color of
  that light bulb.
</p>

<h2 id="advancedgraphicsfeatures">Advanced Graphics Features</h2>

<p>Here’s the list of advanced graphics features we implemented</p>

<ul>
  <li>
    <a
      href="https://www.youtube.com/watch?v=_Ix5oN8eC1E&amp;list=PLRIWtICgwaX0u7Rf9zkZhLoLuZVfUksDP&amp;index=27"
      >Skybox</a
    >
  </li>

  <li>1st Person View Camera</li>

  <li>
    <a
      href="https://www.youtube.com/watch?v=PoxDDZmctnU&amp;list=PLRIWtICgwaX0u7Rf9zkZhLoLuZVfUksDP&amp;index=19&amp;frags=pl%2Cwn"
      >3rd Person View Camera</a
    >
  </li>

  <li>
    <a
      href="https://www.youtube.com/watch?v=HusvGeEDU_U&amp;list=PLRIWtICgwaX23jiqVByUs0bqhnalNTNZh"
      >Water</a
    >
  </li>

  <li>
    <a
      href="http://learningthreejs.com/blog/2012/07/05/minecraft-character-in-webgl/"
      >Minecraft person</a
    >
  </li>

  <li>
    <a
      href="https://www.youtube.com/watch?v=DLKN0jExRIM&amp;list=PLRIWtICgwaX0u7Rf9zkZhLoLuZVfUksDP&amp;index=29"
      >Mouse Picking</a
    >
  </li>

  <li>
    <a
      href="https://www.youtube.com/watch?v=6PkjU9LaDTQ&amp;list=PLRIWtICgwaX0u7Rf9zkZhLoLuZVfUksDP&amp;index=34"
      >Particle Effects</a
    >
  </li>

  <li>Terrain</li>

  <li>Mirror</li>

  <li>Modeling Light Bulb</li>

  <li>Particle Effects (Torch)</li>
</ul>

<h2 id="skybox">Skybox</h2>

<p>
  The idea of skybox is that we create a box with sky textures on it. Each side
  of the box has a corresponding texture (i.e. top, bottom, right, … etc)
</p>

<p><img width="100%" src="./assets/images/skybox/day/top.png" alt="top" /></p>

<p>
  The key point here is that we apply all the transformations just like any
  other objects in the world except we don't want to apply the translation of
  the camera. We want the sky to move with the player.
</p>

<p><img width="100%" src="./images/skybox.png" alt="skybox" /></p>

<h2 id="1stpersonviewcamera3rdpersonviewcamera">
  1st Person View Camera / 3rd Person View Camera
</h2>

<p>
  The original implementation of the camera always translate and rotate with
  respect to current orientation of the camera. We wanted the camera to behave
  similar to the way it works in First Person View Shooting Game (e.g. COD).
</p>

<h2 id="minecraftperson">Minecraft Person</h2>

<p>It works just like the dragonfly assignment.</p>

<h2 id="terrain">Terrain</h2>

<p>Terrain is made of bunch of squares.</p>

<p><img width="100%" src="./images/terrain.png" alt="terrain" /></p>

<p>
  Then we can height map to assign heights to each vertex of the terrain.
  Interporation takes care of the rest.
</p>

<p><img width="100%" src="./assets/images/heightmap.png" alt="heightmap" /></p>

<p>
  The darker the color is, R _ G _ B gets closer to zero, and thus the height is
  low. The whiter the color is, the height is high.
</p>

<h2 id="water">Water</h2>

<p>
  The simplest water is just a flat plane colored with blue. But that's boring.
  To make it more like water, we can add reflection and refraction textures. But
  how do we do that? We essentially need to draw the scene from different camera
  positions, and take a snap shot of the scene.
</p>

<p><img width="100%" src="./images/water.png" alt="water" /></p>

<p>
  Now we can see reflection and refraction textures on the water. But no matter
  where the camera is, the ration of reflection and refraction looks the same.
  In reality, the water refracts more when we are on top of the water. The water
  reflects more when we are on the side.
</p>

<p>
  <img
    width="100%"
    src="./images/water-reflection.jpg"
    alt="water-reflection"
  />
</p>

<p>
  <img
    width="100%"
    src="./images/water-refraction.jpg"
    alt="water-refraction"
  />
</p>

<p>
  So we can do is to change the blending factor of the reflection texture and
  refraction texture based on the location of the camera. We can do that by
  taking the dot product between the water-to-camera vector and water-normal
  vector.
</p>

<p><img width="100%" src="./images/water_normal.png" alt="water_normal" /></p>

<p>
  To make it even more real, we can add dudv map of the water. DuDv map stores
  directional information about how much we want to distort the texture.
</p>

<p><img width="100%" src="./assets/images/waterDUDV.png" alt="waterDUDV" /></p>

<p>
  The color of the dudv map is mostly red and green because red represent
  distoriton in x direction, and green represent distortion in y direction.
</p>

<p><img width="100%" src="./images/distortion.png" alt="distortion" /></p>

<p>
  Finally we can apply normal map to the water to see diffuse and specular
  lighting.
</p>

<h2 id="mirror">Mirror</h2>

<p>
  Mirror works just like the water except there is no refraction and distortion.
  Just a pure reflection.
</p>

<h2 id="mousepicking">Mouse Picking</h2>

<p>
  The idea of mouse picking is that we want to convert 2D mouse coordinates back
  to 3D world coordinates.
</p>

<p><img width="100%" src="./images/mouse.png" alt="mouse" /></p>

<p>
  To do so, we will need to invert the whole graphics drawing pipeline to
  convert mouse coordinates into a ray vector that points from the location of
  the mouse to the scene.
</p>

<p><img width="100%" src="./images/pipeline.png" alt="pipeline" /></p>

<p>
  After we obtain the ray vector, we can calculate its intersection with sphere
  in the 3D scene.
</p>

<p><img width="100%" src="./images/intersection.png" alt="intersection" /></p>

<p>
  We approximated our lightbulbs as spheres and check it the ray intersects with
  a lightbulb.
</p>

<h2 id="particleeffects">Particle Effects</h2>

<p>
  A particle is really just a 2D square in a 3D scene. To make it look like it's
  in 3D scene, the particles have to always face towards the camera. To do this,
  we can simply apply model transform such that it cancels out the camera
  rotation. To animate the particle, we have to carefully choose the texture
  over the lifetime of the particle.
</p>

<p><img width="100%" src="./images/fire.png" alt="fire" /></p>

<p>
  We can choose which texture we want to use by calculating the ratio of
  elapsted time of the particle and its life length. To achieve a smooth
  transtion from one texture to another, we can blend the current texture and
  next texture.
</p>

<h2 id="firework">FireWork</h2>

<p>
  A firework is an interesting appliction that used the Particle effect from
  both the Partical and ParticalSystem class, such that each Firework object
  will have their own partical system that ueses a unique shape and texture.
  Featuredwise, in each frame the user will be able to fire some fireworks and
  oberserve the difference apperance of the fire work and color from all kinds
  of angle.
</p>

<h2 id="modelinglightbulb">Modeling Light Bulb</h2>

<p>
  We use the surface of revolution to model light bulbs by passing a list of
  vertices to the constructor. We then make a rope to hang each light bulb by
  scaling a cube vertically. Also, we create a variable called 'modifier' which
  changes the ambient value over time. When we draw each light bulb, we would
  use this 'modifier' to override of the color of the light bulb. Hence, when we
  draw a bunch of light bulbs at random locations with random colors, we would
  produce a lighting effect.
</p>

<p><img width="100%" src="./images/grap.PNG" alt="surface_of_revolution" /></p>
